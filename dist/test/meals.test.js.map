{"version":3,"sources":["../../test/meals.test.js"],"names":["expect","chai","use","request","p","path","join","__dirname","apiVersion","describe","it","app","get","then","data","JSON","parse","body","meals","to","be","an","have","all","keys","catch","err","console","log","post","send","title","description","image","price","defaultQuantity","res","meal","fs","readFileSync","pop","writeFileSync","stringify","message","put","delete","text","equal"],"mappings":"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","sourcesContent":["import chai from 'chai';\r\nimport request from 'chai-http';\r\nimport app from '../index';\r\nimport fs from 'fs';\r\nimport path from 'path'; \r\n\r\nconst { expect, use } = chai;\r\n\r\nuse(request);\r\n\r\nconst p = path.join(__dirname, '../data', 'meals.json');\r\n\r\nconst apiVersion = '/api/v1';\r\n\r\ndescribe('Get meals', () => {\r\n    it('Should return meals array', () => {\r\n        chai.request(app)\r\n            .get(`${apiVersion}/meals`)\r\n            .then(data => JSON.parse(data.body))\r\n            .then((meals) => {\r\n                expect(meals).to.be.an('array');\r\n                expect(meals[0]).to.have.all.keys('image', 'description', 'title', 'id', 'price', 'defaultQuantity');\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);                \r\n            })\r\n    });\r\n});\r\n\r\ndescribe('Add meal', () => {\r\n    it('Should return meal', () => {\r\n        chai.request(app)\r\n            .post(`${apiVersion}/meals`)\r\n            .send({\r\n                title: 'Test Meal',\r\n                description: 'Juicy tasty cheesy cheeseburger',\r\n                image: 'image1.jpg',\r\n                price: 23.6,\r\n                defaultQuantity: 100,\r\n            })\r\n            .then(res => res.body)\r\n            .then((meal) => {\r\n                expect(meal).to.be.an('object');\r\n                expect(meal).to.have.all.keys('image', 'description', 'title', 'id', 'price', 'defaultQuantity');                \r\n                const meals = JSON.parse(fs.readFileSync(p, 'utf-8'));\r\n                meals.pop();\r\n                fs.writeFileSync(p,JSON.stringify(meals));\r\n            })\r\n            .catch((err) => {\r\n                console.log(err.message);\r\n            });\r\n    });\r\n});\r\n\r\ndescribe('Edit meal', () => {\r\n    it('Should return meal', () => {\r\n        chai.request(app)\r\n            .put(`${apiVersion}/meals/15`)\r\n            .send({\r\n                title: 'Sparghetti',\r\n                description: 'Juicy tasty cheesy cheeseburger',\r\n                image: 'image1.jpg',\r\n                price: 23.6,\r\n                defaultQuantity: 100,\r\n            })\r\n            .then(res => res.body)\r\n            .then((meal) => {\r\n                expect(meal).to.be.an('object');\r\n                expect(meal).to.have.all.keys('image', 'description', 'title', 'id', 'price', 'defaultQuantity');                \r\n            })\r\n            .catch((err) => {\r\n                console.log(err.message);\r\n            });\r\n    });\r\n});\r\n\r\ndescribe('Delete meal', () => {\r\n    it('Should return nothing and status code 204', () => {\r\n        chai.request(app)\r\n            .delete(`${apiVersion}/meals/4`)\r\n            .then((res) => {\r\n                expect(res.text).to.be.equal('');\r\n            })\r\n            .catch((err) => {\r\n                console.log(err.message);\r\n            });\r\n    });\r\n});\r\n"],"file":"meals.test.js"}